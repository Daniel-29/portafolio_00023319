#include<iostream>
#include<stack>
#include <type_traits>
#include <string.h>
using namespace std;
stack <char> s;
stack <char> r;
}
int what_is(char e){
    if( e =='('){
        return 0;
    }else if(e ==')' ){
        return 1;
    }else if(e == '+' || e == '-' || e == '*' || e == '/' || e == '^'){
        return 2;
    }else if(isalpha(e) || isdigit(e)){
        return 3;
    }
}
 
int priority(char e){
    int pri = 0;
    if( e =='^'){
         pri = 3;
    }
    else if(e == '*' || e == '/' ){
         pri = 2;
    }else if(e == '+' || e == '-'){
         pri = 1;
    }
    return pri;
}
void vaciar_pila(){
    while(!s.empty()){
        char ch = s.top();
        if(what_is(ch)==0 || what_is(ch) ==1 ){
            s.pop(); 
        }else{
            r.push( ch ); 
            s.pop();
        }
    }
}
void print_stack(){
    string b="";
    while(!r.empty()){
        b = b+r.top();
        r.pop();
    }
    for(int i =b.length(); i >= 0 ; i--){
        std::cout << b[i-1];
    }
     
}
void evaluar_operador(char e){
    if(s.empty() || what_is(s.top())==0 ){
        s.push(e);
        
    }else{
        if(priority(e) > priority( s.top() )){
            s.push(e);
        }else{
            r.push(s.top());
            s.pop();
            s.push(e);
        }
    }
}

void  postfija(string a,int p){
    int begin = a.length();
    if(begin == p){
        std::cout << "se detiene" << std::endl;
        print_stack();
       
    }else{
        char ch = a[p];
        int is = what_is(ch);
        switch(is){
            case 0: 
                s.push(ch);
                break;
            case 1:
                vaciar_pila();
                break;
            case 2:
                evaluar_operador(ch);
                break;
            case 3:
                r.push(ch);
                break;
        }
        postfija(a,p+1);
    }
}

int main()
{
    string a = "((A+B)*(C+D-E)*(F))";
    postfija(a,0);
    return 0;
}